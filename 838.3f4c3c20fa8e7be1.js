(()=>{"use strict";function K(e,t,r){(function ge(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function X(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function O(e,t){return function me(e,t){return t.get?t.get.call(e):t.value}(e,X(e,t,"get"))}function J(e,t,r){return function ve(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,X(e,t,"set"),r),r}function b(e){return"function"==typeof e}function te(e){const r=e(n=>{Error.call(n),n.stack=(new Error).stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}const U=te(e=>function(r){e(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((n,s)=>`${s+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r});function H(e,t){if(e){const r=e.indexOf(t);0<=r&&e.splice(r,1)}}class p{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const i of r)i.remove(this);else r.remove(this);const{initialTeardown:n}=this;if(b(n))try{n()}catch(i){t=i instanceof U?i.errors:[i]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const i of s)try{ie(i)}catch(o){t=t??[],o instanceof U?t=[...t,...o.errors]:t.push(o)}}if(t)throw new U(t)}}add(t){var r;if(t&&t!==this)if(this.closed)ie(t);else{if(t instanceof p){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}}_hasParent(t){const{_parentage:r}=this;return r===t||Array.isArray(r)&&r.includes(t)}_addParent(t){const{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t}_removeParent(t){const{_parentage:r}=this;r===t?this._parentage=null:Array.isArray(r)&&H(r,t)}remove(t){const{_finalizers:r}=this;r&&H(r,t),t instanceof p&&t._removeParent(this)}}p.EMPTY=(()=>{const e=new p;return e.closed=!0,e})();const re=p.EMPTY;function ne(e){return e instanceof p||e&&"closed"in e&&b(e.remove)&&b(e.add)&&b(e.unsubscribe)}function ie(e){b(e)?e():e.unsubscribe()}const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},j={setTimeout(e,t,...r){const{delegate:n}=j;return n?.setTimeout?n.setTimeout(e,t,...r):setTimeout(e,t,...r)},clearTimeout(e){const{delegate:t}=j;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function se(){}const xe=V("C",void 0,void 0);function V(e,t,r){return{kind:e,value:t,error:r}}let v=null;function A(e){if(m.useDeprecatedSynchronousErrorHandling){const t=!v;if(t&&(v={errorThrown:!1,error:null}),e(),t){const{errorThrown:r,error:n}=v;if(v=null,r)throw n}}else e()}class oe extends p{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ne(t)&&t.add(this)):this.destination=Me}static create(t,r,n){return new N(t,r,n)}next(t){this.isStopped?G(function je(e){return V("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?G(function Te(e){return V("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?G(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ce=Function.prototype.bind;function W(e,t){return Ce.call(e,t)}class ze{constructor(t){this.partialObserver=t}next(t){const{partialObserver:r}=this;if(r.next)try{r.next(t)}catch(n){C(n)}}error(t){const{partialObserver:r}=this;if(r.error)try{r.error(t)}catch(n){C(n)}else C(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(r){C(r)}}}class N extends oe{constructor(t,r,n){let s;if(super(),b(t)||!t)s={next:t??void 0,error:r??void 0,complete:n??void 0};else{let i;this&&m.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&W(t.next,i),error:t.error&&W(t.error,i),complete:t.complete&&W(t.complete,i)}):s=t}this.destination=new ze(s)}}function C(e){m.useDeprecatedSynchronousErrorHandling?function Ae(e){m.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=e)}(e):function Pe(e){j.setTimeout(()=>{const{onUnhandledError:t}=m;if(!t)throw e;t(e)})}(e)}function G(e,t){const{onStoppedNotification:r}=m;r&&j.setTimeout(()=>r(e,t))}const Me={closed:!0,next:se,error:function Re(e){throw e},complete:se},Ie="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(e){return e}let z=(()=>{class e{constructor(r){r&&(this._subscribe=r)}lift(r){const n=new e;return n.source=this,n.operator=r,n}subscribe(r,n,s){const i=function Le(e){return e&&e instanceof oe||function De(e){return e&&b(e.next)&&b(e.error)&&b(e.complete)}(e)&&ne(e)}(r)?r:new N(r,n,s);return A(()=>{const{operator:o,source:c}=this;i.add(o?o.call(i,c):c?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(r){try{return this._subscribe(r)}catch(n){r.error(n)}}forEach(r,n){return new(n=ce(n))((s,i)=>{const o=new N({next:c=>{try{r(c)}catch(f){i(f),o.unsubscribe()}},error:i,complete:s});this.subscribe(o)})}_subscribe(r){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(r)}[Ie](){return this}pipe(...r){return function ae(e){return 0===e.length?Fe:1===e.length?e[0]:function(r){return e.reduce((n,s)=>s(n),r)}}(r)(this)}toPromise(r){return new(r=ce(r))((n,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>n(i))})}}return e.create=t=>new e(t),e})();function ce(e){var t;return null!==(t=e??m.Promise)&&void 0!==t?t:Promise}const ke=te(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ue=(()=>{class e extends z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const n=new le(this,this);return n.operator=r,n}_throwIfClosed(){if(this.closed)throw new ke}next(r){A(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(r)}})}error(r){A(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:n}=this;for(;n.length;)n.shift().error(r)}})}complete(){A(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:n,isStopped:s,observers:i}=this;return n||s?re:(this.currentObservers=null,i.push(r),new p(()=>{this.currentObservers=null,H(i,r)}))}_checkFinalizedStatuses(r){const{hasError:n,thrownError:s,isStopped:i}=this;n?r.error(s):i&&r.complete()}asObservable(){const r=new z;return r.source=this,r}}return e.create=(t,r)=>new le(t,r),e})();class le extends ue{constructor(t,r){super(),this.destination=t,this.source=r}next(t){var r,n;null===(n=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===n||n.call(r,t)}error(t){var r,n;null===(n=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===n||n.call(r,t)}complete(){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===r||r.call(t)}_subscribe(t){var r,n;return null!==(n=null===(r=this.source)||void 0===r?void 0:r.subscribe(t))&&void 0!==n?n:re}}class Ue extends ue{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const r=super._subscribe(t);return!r.closed&&t.next(this._value),r}getValue(){const{hasError:t,thrownError:r,_value:n}=this;if(t)throw r;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const fe=Symbol("Comlink.proxy"),He=Symbol("Comlink.endpoint"),Y=Symbol("Comlink.releaseProxy"),$=Symbol("Comlink.finalizer"),R=Symbol("Comlink.thrown"),he=e=>"object"==typeof e&&null!==e||"function"==typeof e,y=new Map([["proxy",{canHandle:e=>he(e)&&e[fe],serialize(e){const{port1:t,port2:r}=new MessageChannel;return B(e,t),[r,[r]]},deserialize:e=>(e.start(),function Ye(e,t){return q(e,[],t)}(e))}],["throw",{canHandle:e=>he(e)&&R in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}}]]);function B(e,t=globalThis,r=["*"]){t.addEventListener("message",function n(s){if(!s||!s.data)return;if(!function Ne(e,t){for(const r of e)if(t===r||"*"===r||r instanceof RegExp&&r.test(t))return!0;return!1}(r,s.origin))return void console.warn(`Invalid origin '${s.origin}' for comlink proxy`);const{id:i,type:o,path:c}=Object.assign({path:[]},s.data),f=(s.data.argumentList||[]).map(E);let a;try{const u=c.slice(0,-1).reduce((l,d)=>l[d],e),h=c.reduce((l,d)=>l[d],e);switch(o){case"GET":a=h;break;case"SET":u[c.slice(-1)[0]]=E(s.data.value),a=!0;break;case"APPLY":a=h.apply(u,f);break;case"CONSTRUCT":a=_e(new h(...f));break;case"ENDPOINT":{const{port1:l,port2:d}=new MessageChannel;B(e,d),a=function Ke(e,t){return ye.set(e,t),e}(l,[l])}break;case"RELEASE":a=void 0;break;default:return}}catch(u){a={value:u,[R]:0}}Promise.resolve(a).catch(u=>({value:u,[R]:0})).then(u=>{const[h,l]=D(u);t.postMessage(Object.assign(Object.assign({},h),{id:i}),l),"RELEASE"===o&&(t.removeEventListener("message",n),de(t),$ in e&&"function"==typeof e[$]&&e[$]())}).catch(u=>{const[h,l]=D({value:new TypeError("Unserializable return value"),[R]:0});t.postMessage(Object.assign(Object.assign({},h),{id:i}),l)})}),t.start&&t.start()}function de(e){(function Ge(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function M(e){if(e)throw new Error("Proxy has been released and is not useable")}function pe(e){return P(e,{type:"RELEASE"}).then(()=>{de(e)})}const I=new WeakMap,F="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(I.get(e)||0)-1;I.set(e,t),0===t&&pe(e)});function q(e,t=[],r=function(){}){let n=!1;const s=new Proxy(r,{get(i,o){if(M(n),o===Y)return()=>{(function Be(e){F&&F.unregister(e)})(s),pe(e),n=!0};if("then"===o){if(0===t.length)return{then:()=>s};const c=P(e,{type:"GET",path:t.map(f=>f.toString())}).then(E);return c.then.bind(c)}return q(e,[...t,o])},set(i,o,c){M(n);const[f,a]=D(c);return P(e,{type:"SET",path:[...t,o].map(u=>u.toString()),value:f},a).then(E)},apply(i,o,c){M(n);const f=t[t.length-1];if(f===He)return P(e,{type:"ENDPOINT"}).then(E);if("bind"===f)return q(e,t.slice(0,-1));const[a,u]=be(c);return P(e,{type:"APPLY",path:t.map(h=>h.toString()),argumentList:a},u).then(E)},construct(i,o){M(n);const[c,f]=be(o);return P(e,{type:"CONSTRUCT",path:t.map(a=>a.toString()),argumentList:c},f).then(E)}});return function $e(e,t){const r=(I.get(t)||0)+1;I.set(t,r),F&&F.register(e,t,e)}(s,e),s}function qe(e){return Array.prototype.concat.apply([],e)}function be(e){const t=e.map(D);return[t.map(r=>r[0]),qe(t.map(r=>r[1]))]}const ye=new WeakMap;function _e(e){return Object.assign(e,{[fe]:!0})}function D(e){for(const[t,r]of y)if(r.canHandle(e)){const[n,s]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},s]}return[{type:"RAW",value:e},ye.get(e)||[]]}function E(e){switch(e.type){case"HANDLER":return y.get(e.name).deserialize(e.value);case"RAW":return e.value}}function P(e,t,r){return new Promise(n=>{const s=function Xe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}();e.addEventListener("message",function i(o){!o.data||!o.data.id||o.data.id!==s||(e.removeEventListener("message",i),n(o.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),r)})}var _,L;y.set("observable",{canHandle:e=>e instanceof z,deserialize:e=>new z(t=>{const r=y.get("proxy").deserialize(e);r.subscribe(_e({next:n=>t.next(n),error:n=>t.error(n),complete:()=>t.complete()})).then(n=>t.add(()=>{n.unsubscribe(),r[Y]()}))}),serialize:e=>y.get("proxy").serialize({subscribe:t=>e.subscribe({next:r=>{t.next(r).then()},error:r=>{t.error(r).then()},complete:()=>{t.complete().then()}})})}),y.set("subscription",{canHandle:e=>e instanceof p,deserialize:e=>new p(()=>{const t=y.get("proxy").deserialize(e);t.unsubscribe().then(()=>{t[Y]()})}),serialize:e=>y.get("proxy").serialize({unsubscribe:()=>e.unsubscribe()})});let we=(_=new WeakMap,L=new WeakMap,class{constructor(){K(this,_,{writable:!0,value:void 0}),K(this,L,{writable:!0,value:void 0}),J(this,_,new Ue(0)),J(this,L,O(this,_).asObservable())}get counter(){return O(this,L)}increment(){O(this,_).next(O(this,_).value+1)}decrement(){O(this,_).next(O(this,_).value-1)}});we=function Ee(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([function Je(){return e=>{B(e)}}()],we)})();